<head>
    <script type="text/javascript" src="../../lib/MooTools/Core-1.3.js"></script>
    <script type="text/javascript" src="../../lib/MooTools/More-1.3.0.1.js"></script>
    <script type="text/javascript" src="../../lib/Test/Builder.js"></script>
    <script type="text/javascript" src="../../lib/Test/More.js"></script>

    <script type="text/javascript" src="../lib/MooTools/More/Class/Attribute.js"></script>
    <script type="text/javascript" src="../lib/MooTools/More/Class/Attribute/Lazy.js"></script>
    <script type="text/javascript" src="../lib/MooTools/More/Class/Attributes.js"></script>
</head>
<body>
<pre id="test">
<script type="text/javascript">

plan({tests: 5});
////////////////////////////////////////////////////////////////////////////////
TESTCLASS = new Class({

    Attributes: {

        testLazybuild:{
            is:         'rw',
            lazyBuild:  true
        },

        test: {
            is:         'ro',
            required:   true
        },
        
    },

    _buildTestLazybuild: function () { return this.getTest() + 1; },

    initialize: function (args) {
        this.setAttributes(args);
    }

});


t = new TESTCLASS({test: 5});

canOK(t,'clearTestLazybuild');
canOK(t,'hasTestLazybuild');
is(t.getTestLazybuild(),       6,   'lazy builder is used');
ok(t.hasTestLazybuild(),            'predicate set')
t.clearTestLazybuild();
ok(!t.hasTestLazybuild(),           'clearer used')



</script>
</pre>
</body>
