<head>
    <script type="text/javascript" src="../../lib/MooTools/Core-1.3.js"></script>
    <script type="text/javascript" src="../../lib/MooTools/More-1.3.0.1.js"></script>
    <script type="text/javascript" src="../../lib/Test/Builder.js"></script>
    <script type="text/javascript" src="../../lib/Test/More.js"></script>

    <script type="text/javascript" src="../lib/MooTools/More/Class/Attribute.js"></script>
    <script type="text/javascript" src="../lib/MooTools/More/Class/Attribute/Lazy.js"></script>
    <script type="text/javascript" src="../lib/MooTools/More/Class/Attributes.js"></script>
</head>
<body>
<pre id="test">
<script type="text/javascript">

plan({tests: 1});

TestClass = new Class({
    
    Attributes: {
        
        coerceConstructor: {
            is:         'ro',
            isa:        'String',
            required:   true,
            coerce:     true
        },
        
        coerceSetter: {
            is:         'rw',
            isa:        'String',
            coerce:     true
        },
        
        coerceWriter: {
            is:         'ro',
            isa:        'String',
            writer:     '_setCoerceWriter',
            coerce:     true
        },
        
        coerceDefault: {
            is:         'ro',
            isa:        'String',
            coerce:     true,
            'default':  1
        },
        
        coerceBuilder: {
            is:         'ro',
            isa:        'String',
            coerce:     true,
            builder:    '_buildCoerceBuilder'
        }
        
    },
    
    _buildCoerceBuilder: function () { return 1 },    
    
    initialize: function (args) {
        this.setAttributes(args);   
    }
    
});

t = new TestClass({ coerceConstructor: 1 });
is(t.getCoerceConstructor(),    "1",    'Coerce in Constructor worked');

</script>
</pre>
</body>
